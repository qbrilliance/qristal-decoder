# Copyright (c) 2022 Quantum Brilliance Pty Ltd
set(LIBRARY_NAME qbos-algorithm-simplified-decoder)

file(GLOB SRC *.cpp)

usfunctiongetresourcesource(TARGET ${LIBRARY_NAME} OUT SRC)
usfunctiongeneratebundleinit(TARGET ${LIBRARY_NAME} OUT SRC)

add_library(${LIBRARY_NAME} SHARED ${SRC})

target_include_directories(${LIBRARY_NAME}
  PUBLIC 
	  .
)

target_link_libraries(${LIBRARY_NAME} 
	PUBLIC 
		xacc::xacc 
		xacc::quantum_gate
)

set(_bundle_name qbos_algorithm_simplified_decoder)

set_target_properties(${LIBRARY_NAME}
	PROPERTIES 
		COMPILE_DEFINITIONS
			US_BUNDLE_NAME=${_bundle_name}
			US_BUNDLE_NAME ${_bundle_name}
)

usfunctionembedresources(TARGET
	${LIBRARY_NAME}
	WORKING_DIRECTORY
	${CMAKE_CURRENT_SOURCE_DIR}
	FILES
	manifest.json
)

install(TARGETS ${LIBRARY_NAME} DESTINATION ${XACC_DIR}/plugins)

#add_subdirectory(tests)
